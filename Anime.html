<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Anime App</title>
  <style>
    body {margin:0;font-family:sans-serif;background:#111;color:#fff}
    header {display:flex;align-items:center;justify-content:space-between;
      padding:10px 20px;background:#222;transition:all .3s}
    header.logged-in {padding:20px}
    header img {height:30px;transition:all .3s}
    header.logged-in img {height:40px}
    header h1 {font-size:18px;margin-left:10px;transition:all .3s}
    header.logged-in h1 {font-size:22px}
    .banner img{width:100%;cursor:pointer;border-radius:6px}
    .stats{padding:15px;background:#1c1c1c;margin:15px;border-radius:8px}
    .btn{padding:8px 14px;background:#333;border:none;color:#fff;
      border-radius:6px;cursor:pointer;margin:4px}
    .btn:hover{background:#555}
    .modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;
      background:rgba(0,0,0,.6);align-items:center;justify-content:center}
    .modal-content{background:#222;padding:20px;border-radius:10px;text-align:center}
    .close{margin-top:10px;cursor:pointer;color:#aaa}
  </style>
</head>
<body>

<header id="header">
  <div style="display:flex;align-items:center">
    <img src="logo.png" alt="Logo">
    <h1>AnimeWorld</h1>
  </div>
  <button class="btn" id="btnLogin">Login</button>
</header>

<!-- Banner -->
<div id="banner" class="banner"></div>

<!-- Stats -->
<div class="stats">
  <p>Level: <span id="userLevel">1</span></p>
  <p>Exp: <span id="userExp">0</span></p>
  <p>Kunci: <span id="userKeys">0</span></p>
  <button class="btn" onclick="openModal('daily')">Misi Harian</button>
  <button class="btn" onclick="openModal('gacha')">Gacha Kunci</button>
</div>

<!-- MODAL Daily -->
<div id="modal-daily" class="modal">
  <div class="modal-content">
    <h3>Misi Harian</h3>
    <p>Login harian +20 exp & +1 key</p>
    <button class="btn" onclick="claimDaily()">Klaim</button>
    <div class="close" onclick="closeModal('daily')">Tutup</div>
  </div>
</div>

<!-- MODAL Gacha -->
<div id="modal-gacha" class="modal">
  <div class="modal-content">
    <h3>Gacha ðŸ”‘</h3>
    <p>Butuh 5 kunci untuk gacha</p>
    <button class="btn" onclick="doGacha()">Mulai</button>
    <div class="close" onclick="closeModal('gacha')">Tutup</div>
  </div>
</div>

<script>
let user={exp:0,level:1,keys:0,loggedIn:false,lastDaily:null};

// Banner data
const banners=[
  {img:"assets/anime1.jpg",link:"detail.html?id=anime1"},
  {img:"assets/anime2.jpg",link:"detail.html?id=anime2"},
  {img:"assets/anime3.jpg",link:"detail.html?id=anime3"}
];

function loadBanner(){
  const b=banners[Math.floor(Math.random()*banners.length)];
  document.getElementById("banner").innerHTML=
    `<a href="${b.link}"><img src="${b.img}" alt="Banner"></a>`;
}
loadBanner();

// Modal control
function openModal(id){document.getElementById("modal-"+id).style.display="flex";}
function closeModal(id){document.getElementById("modal-"+id).style.display="none";}

// Update UI
function updateUI(){
  document.getElementById("userLevel").textContent=user.level;
  document.getElementById("userExp").textContent=user.exp;
  document.getElementById("userKeys").textContent=user.keys;
}
updateUI();

// Exp & Level
function addExp(amount){
  user.exp+=amount;
  if(user.exp>=user.level*100){
    user.exp=0;
    user.level++;
    if(user.level%2===0){user.keys+=1;alert("Naik level! Bonus 1 key!");}
  }
  updateUI();
}

// Misi harian
function claimDaily(){
  let today=new Date().toDateString();
  if(user.lastDaily===today){alert("Sudah klaim hari ini!");return;}
  user.lastDaily=today;
  user.keys+=1;
  addExp(20);
  updateUI();
  closeModal('daily');
}

// Gacha
function doGacha(){
  if(user.keys<5){alert("Kunci tidak cukup!");return;}
  user.keys-=5;
  let rewards=[
    {type:"key",amount:3},
    {type:"key",amount:5},
    {type:"key",amount:7},
    {type:"exp",amount:20}, // pengganti zonk
    {type:"key",amount:10}
  ];
  let r=rewards[Math.floor(Math.random()*rewards.length)];
  if(r.type==="key"){user.keys+=r.amount;alert("Menang ðŸŽ‰ +" + r.amount + " kunci!");}
  else{addExp(r.amount);alert("Bonus ðŸŽ‰ +" + r.amount + " exp!");}
  updateUI();
  closeModal('gacha');
}

// Simulasi nonton anime â†’ dapat exp
function watchAnime(durasiMenit){
  addExp(durasiMenit*5);
  alert("Selesai nonton anime +" + (durasiMenit*5) + " exp");
}

// Login simulasi
document.getElementById("btnLogin").addEventListener("click",()=>{
  user.loggedIn=true;
  document.getElementById("header").classList.add("logged-in");
  document.getElementById("btnLogin").style.display="none";
});
</script>
</body>
</html>
